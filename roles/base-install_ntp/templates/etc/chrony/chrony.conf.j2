# /etc/chrony/chrony.conf — Ansible template

# ── Primary time source (internal)
server {{ internal_gateway }} iburst      # e.g. 192.168.1.1
# ── Fallback public pools ────────────────────────────────────────────────────
pool 0.pool.ntp.org iburst maxsources 2
pool 1.pool.ntp.org iburst maxsources 2   # second fallback

# ── Allow LAN clients to query this host (adjust subnet as needed) ──────────
allow {{ ntp_allow_cidr }}                # e.g 192.168.1.0/24 (VM subnet)

# ── House-keeping ────────────────────────────────────────────────────────────
driftfile /var/lib/chrony/chrony.drift
makestep 1 3
rtcsync
logdir /var/log/chrony